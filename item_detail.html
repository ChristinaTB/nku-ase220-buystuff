<!DOCTYPE html>
<html>
    <head>
        <title>BuyStuff</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">  
        <!-- <link href="index.css" rel= "stylesheet"> -->
    
    
    <style>
        .navbar-brand{
            font-size: 20pt;
            font-weight: bold;

        }

    </style>
       

    </head>

    <body>

        <nav class="navbar navbar-expand-lg navbar-light bg-warning">
            <div class="container-fluid">
              <a class="navbar-brand" href="index.html" >BuyStuff</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="signup.html">Sign up</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="signin.html">Sign in</a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>


		

          <div class = "container" id ="item_info">
              <div class = "row">
                <!-- <p id = "name"></p> -->

                <div class="card text-dark bg-light mb-3">
                 <div class="card-header"><h1 id = "name" style = "font-size: 40pt;text-align: center; font-weight: bolder; "> </h1></div>
                  <div class="card-body" style ="text-align: center;">
                    <div>
                    <img id = "item_picture"  style = "width: 75%; height: 400px;"  /></div>
                    <div class="card">
                      <div class="card-header text-center" style = "font-size: 50pt;">
                        Description
                      </div>
                      <ul class="list-group list-group-flush">
                        <li class="list-group-item text-center" id = "price" style = "font-size: 25pt;"></li>
                       <p style = "padding-left: 18px; font-size: 30pt; text-align: center;text-decoration: underline;">Item Details <li class="list-group-item text-center" id = "item_detail" style = "font-size: 15pt;"></li></p> 
                        <span style = "padding-left: 18px; font-size: 10pt;">Contact Name: </span><li class="list-group-item" id ="seller"></li>
                    </div>
                   <div class = "text-center mt-3"><button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#staticBackdrop"style = "font-size: 20pt;">
 Purchase Item
</button></div>
                  </div>
      <!-- <button type="button" id="btn-purchase" data-bs-toggle="modal" data-bs-target="#staticBackdrop"class="btn btn-warning" >Purchase Item</button>          -->
              </div>

              <div id = "notification">
                <!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Purchasing Item</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="messagetext">
        
      </div>
      <div id ="loading" class = "mb-3">
                <div class="text-center">
                  <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" id="btn-purchase" class="btn btn-primary">Purchase</button>
      </div>
    </div>
  </div>
</div>
              </div>
              

</div>

        
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

          <script src="assets/jquery-3.5.1.min.js"></script>
          <script src="assets/app.js"></script>

          <script>
 
document.getElementById("loading").style.visibility  = "hidden";
document.getElementById("messagetext").innerHTML = "Are you sure you want to buy this item?";
 console.log(findGetParameter('itemID'));

    var jsonstr = $.getJSON('API/item_detail.php?itemID='+findGetParameter('itemID'), function(data){
      
       console.log(data);
       $('#name').text(data.item_name);
       $('#price').text("Price: $" + data.item_price);
       $('#item_detail').text(data.item_detail);
       $('#seller').text(data.firstname + ' '+ data.lastname + ' ||  ' + data.email);

       $('#item_picture').attr('src', data.item_picture);
 

			});
	 document.getElementById("loading").style.display = "hidden";
   $(document).on('click', '#btn-purchase', function(data)
   {
     var delay = 4000;
     document.getElementById("messagetext").innerHTML = "Thank you for purchasing! ";
     
     document.getElementById("loading").style.visibility  = "visible";

     window.setTimeout(function(){window.location.href = "index.html"},delay);


    
   });






		</script> 
          
        

    </body>
</html>